<ion-item *ngIf="!productDetails">
  <ion-thumbnail slot="start">
    <ion-skeleton-text animated></ion-skeleton-text>
  </ion-thumbnail>
  <h6 style="width: 100%">
    <ion-skeleton-text [ngStyle]="{width: randomSkeletonWidth}"></ion-skeleton-text>
  </h6>
</ion-item>

<ion-item lines="none" *ngIf="productDetails">
  <ion-thumbnail slot="start">
    <img [src]="productDetails.image || '../../assets/defaults/default_logo.png'">
  </ion-thumbnail>
  <ion-row class="inner-item">

    <ion-col size="3">
      <h6 (click)="navService.goToEditProduct(productDetails.id)" style="cursor: pointer">{{productDetails.name}}</h6>
    </ion-col>

    <ion-col>
      <h6 *ngIf="!edit">{{productOrder.pricePerUnit || productDetails.price | price}}</h6>
      <ion-input *ngIf="edit" type="number" step="any" [(ngModel)]="tempPrice" select-text></ion-input>
      <ion-text *ngIf="edit" class="ion-margin-end">{{null | price}}</ion-text>
    </ion-col>

    <ion-col>
      <h6 *ngIf="!edit" [title]="productOrder.amount < productDetails.orderMin ? 'מינימום הזמנה: ' + productDetails.orderMin : ''">
        <ion-text *ngIf="productOrder.amount < productDetails.orderMin ? 'danger' : ''" color="danger">* </ion-text>
        <ion-text [color]="productOrder.amount < productDetails.orderMin ? 'danger' : ''">{{productOrder.amount | unitAmount : productDetails.type}}</ion-text>
      </h6>
      <ion-input *ngIf="edit" type="number" step="any" [(ngModel)]="tempAmount" select-text></ion-input>
      <ion-text *ngIf="edit" class="ion-margin-end">{{null | unitAmount : productDetails.type}}</ion-text>
    </ion-col>

    <ion-col>
      <h6>{{productOrder.amount * (productOrder.pricePerUnit || productDetails.price) | price}}</h6>
    </ion-col>

    <ion-col [size]="showComment ? 1 : 2" *ngIf="editProduct">
      <div *ngIf="!edit">
        <ion-button class="small-circle-btn" fill="clear" (click)="clearClicked.emit()" [disabled]="disabled" title="הסרת פריט מהרשימה">
          <ion-icon slot="icon-only" name="close"></ion-icon>
        </ion-button>
        <ion-button fill="clear" (click)="onEditClicked()" [disabled]="disabled" title="עריכת כמות ומחיר עבור הפריט">
          <ion-icon slot="icon-only" src="../../assets/svg/icon_pen.svg"></ion-icon>
        </ion-button>
      </div>
      <div *ngIf="edit">
        <ion-button fill="clear" color="danger" (click)="onCancelChange()" title="ביטול שינוי">
          <ion-icon slot="icon-only" name="close"></ion-icon>
        </ion-button>
        <ion-button fill="clear" color="success" (click)="onAcceptChange()" title="אישור שינוי">
          <ion-icon slot="icon-only" name="checkmark"></ion-icon>
        </ion-button>
      </div>
    </ion-col>

    <ion-col [size]="editBoxes || productOrder.boxes ? 3 : 4" *ngIf="showComment">
      <ion-input id="inputComment" *ngIf="editComment" placeholder="הערות בנוגע למוצר" [(ngModel)]="productOrder.comment" [readonly]="!editComment"></ion-input>
      <p *ngIf="!editComment && productOrder.comment" style="overflow: auto"><ion-text style="text-decoration: underline">הערת לקוח</ion-text>: {{productOrder.comment}}</p>
    </ion-col>

    <ion-col size="1" *ngIf="editBoxes || productOrder.boxes" title="מספר ארגזים">
      <mat-form-field style="width: 100% !important; text-align: center">
        <input matInput [(ngModel)]="productOrder.boxes" [readonly]="!editBoxes">
        <mat-hint>מס. ארגזים</mat-hint>
      </mat-form-field>
    </ion-col>

    <ion-col *ngIf="extraBtnText">
      <ion-button id="extra-btn" color="dark" fill="outline" shape="round" (click)="extraBtnClicked.emit(productOrder)">{{extraBtnText}}</ion-button>
    </ion-col>

  </ion-row>
</ion-item>
